<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Service - MarchProxy</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
</head>
<body>
    <nav class="navbar is-dark" role="navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="[[=URL('dashboard')]]">
                <strong>MarchProxy</strong>
            </a>
        </div>
        
        <div class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item" href="[[=URL('dashboard')]]">Dashboard</a>
                <a class="navbar-item" href="[[=URL('clusters')]]">Clusters</a>
                <a class="navbar-item is-active" href="[[=URL('services')]]">Services</a>
                [[if user.is_admin:]]
                <a class="navbar-item" href="[[=URL('users')]]">Users</a>
                [[pass]]
            </div>
            
            <div class="navbar-end">
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        [[=user.username]]
                    </a>
                    <div class="navbar-dropdown">
                        <a class="navbar-item" href="[[=URL('auth/setup-2fa')]]">2FA Setup</a>
                        <hr class="navbar-divider">
                        <a class="navbar-item" href="[[=URL('auth/logout')]]">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8 is-offset-2">
                    <h1 class="title">Create Service</h1>
                    
                    <div class="card">
                        <div class="card-content">
                            [[=form.custom.begin]]
                            
                            <div class="field">
                                <label class="label">Service Name</label>
                                <div class="control">
                                    [[=form.custom.widget.name]]
                                </div>
                                [[if form.errors.name:]]
                                <p class="help is-danger">[[=form.errors.name]]</p>
                                [[pass]]
                            </div>
                            
                            <div class="field">
                                <label class="label">IP or FQDN</label>
                                <div class="control">
                                    [[=form.custom.widget.ip_fqdn]]
                                </div>
                                [[if form.errors.ip_fqdn:]]
                                <p class="help is-danger">[[=form.errors.ip_fqdn]]</p>
                                [[pass]]
                            </div>
                            
                            <div class="field">
                                <label class="label">Collection/Group (Optional)</label>
                                <div class="control">
                                    [[=form.custom.widget.collection]]
                                </div>
                                <p class="help">Used to group related services together</p>
                                [[if form.errors.collection:]]
                                <p class="help is-danger">[[=form.errors.collection]]</p>
                                [[pass]]
                            </div>
                            
                            <div class="field">
                                <label class="label">Cluster</label>
                                <div class="control">
                                    <div class="select is-fullwidth">
                                        [[=form.custom.widget.cluster_id]]
                                    </div>
                                </div>
                                [[if form.errors.cluster_id:]]
                                <p class="help is-danger">[[=form.errors.cluster_id]]</p>
                                [[pass]]
                            </div>
                            
                            <div class="field">
                                <label class="label">Description (Optional)</label>
                                <div class="control">
                                    [[=form.custom.widget.description]]
                                </div>
                                [[if form.errors.description:]]
                                <p class="help is-danger">[[=form.errors.description]]</p>
                                [[pass]]
                            </div>
                            
                            <div class="field">
                                <label class="label">Authentication Type</label>
                                <div class="control">
                                    <div class="select is-fullwidth">
                                        [[=form.custom.widget.auth_type]]
                                    </div>
                                </div>
                                <p class="help">
                                    <strong>None:</strong> No authentication required<br>
                                    <strong>Base64:</strong> Simple token-based authentication<br>
                                    <strong>JWT:</strong> JSON Web Token with automatic rotation
                                </p>
                                [[if form.errors.auth_type:]]
                                <p class="help is-danger">[[=form.errors.auth_type]]</p>
                                [[pass]]
                            </div>
                            
                            <div class="field">
                                <label class="label">Tags (Optional)</label>
                                <div class="control">
                                    [[=form.custom.widget.tags]]
                                </div>
                                <p class="help">Comma-separated tags for organization</p>
                                [[if form.errors.tags:]]
                                <p class="help is-danger">[[=form.errors.tags]]</p>
                                [[pass]]
                            </div>
                            
                            <div class="field is-grouped">
                                <div class="control">
                                    <button class="button is-primary" type="submit">Create Service</button>
                                </div>
                                <div class="control">
                                    <a class="button is-light" href="[[=URL('services')]]">Cancel</a>
                                </div>
                            </div>
                            
                            [[=form.custom.end]]
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <style>
        .input, .textarea, .select select {
            border-radius: 4px;
        }
        .card {
            border-radius: 8px;
        }
    </style>
</body>
</html>